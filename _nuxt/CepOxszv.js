import P from"./D6m2PybQ.js";import k from"./CBxifYYf.js";import b from"./Con0Vlgw.js";import{d,u as L,C as R,P as g,s as C,D as x,E as S,r as B,a as E,G as m,H as N,I as T,J as p,K as j,L as H,S as O,T as A,M as D,N as $,O as u,p as w,Q as q,c as f,e as I,i as y,w as _,U as v}from"./BYDpZ8Xy.js";import{u as M}from"./BcYgO_z1.js";import"./DtBUWwKh.js";import"./CxYJgpPD.js";import"./ack65jXi.js";const F=d({name:"LayoutLoader",inheritAttrs:!1,props:{name:String,layoutProps:Object},setup(t,o){return()=>p(m[t.name],t.layoutProps,o.slots)}}),G=d({name:"NuxtLayout",inheritAttrs:!1,props:{name:{type:[String,Boolean,Object],default:null},fallback:{type:[String,Object],default:null}},setup(t,o){const e=L(),n=R(g),s=n===C()?x():n,r=S(()=>{let a=u(t.name)??s.meta.layout??"default";return a&&!(a in m)&&t.fallback&&(a=u(t.fallback)),a}),i=B();o.expose({layoutRef:i});const l=e.deferHydration();if(e.isHydrating){const a=e.hooks.hookOnce("app:error",l);E().beforeEach(a)}return()=>{const a=r.value&&r.value in m,c=s.meta.layoutTransition??N;return T(A,a&&c,{default:()=>p(O,{suspensible:!0,onResolve:()=>{H(l)}},{default:()=>p(J,{layoutProps:j(o.attrs,{ref:i}),key:r.value||void 0,name:r.value,shouldProvide:!t.name,hasTransition:!!c},o.slots)})}).default()}}}),J=d({name:"NuxtLayoutProvider",inheritAttrs:!1,props:{name:{type:[String,Boolean]},layoutProps:{type:Object},hasTransition:{type:Boolean},shouldProvide:{type:Boolean}},setup(t,o){const e=t.name;return t.shouldProvide&&D($,{isCurrent:n=>e===(n.meta.layout??"default")}),()=>{var n,s;return!e||typeof e=="string"&&!(e in m)?(s=(n=o.slots).default)==null?void 0:s.call(n):p(F,{key:e,layoutProps:t.layoutProps,name:e},o.slots)}}}),K={class:"document-driven-page"},te=d({__name:"document-driven",setup(t){const{contentHead:o}=w().public.content,{page:e,layout:n}=q();return e.value,o&&M(e),(s,r)=>{const i=P,l=k,a=b,c=G;return f(),I("div",K,[y(c,{name:u(n)||"default"},{default:_(()=>[u(e)?(f(),v(l,{key:u(e)._id,value:u(e)},{empty:_(({value:h})=>[y(i,{value:h},null,8,["value"])]),_:1},8,["value"])):(f(),v(a,{key:1}))]),_:1},8,["name"])])}}});export{te as default};
